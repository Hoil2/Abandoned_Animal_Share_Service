<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.ex.ShareCenterMapper">

	<!-- 분양센터 게시판 출력 -->
	<select id="getShareCenterBoardPage" resultType="ShareCenterDTO">
		SELECT * FROM abandoned_animal_info LIMIT #{Page}, #{PageSize}
	</select>
	
	<!-- 분양센터 게시글 총 갯수 -->
	<select id="getShareCenterBoardViewTotalCount" resultType="int">
		SELECT COUNT(*) FROM abandoned_animal_info
	</select>
	
	<!-- 공공데이터 유기동물 API DB에 저장 -->
	<sql id="setDbShareCenterApiResponse">
		INSERT INTO abandoned_animal_info(desertion_no, filename, happen_dt, happen_place, kind_cd, color_cd, age, weight, notice_no, notice_sdt, notice_edt, popfile, process_state, sex_cd, neuter_yn, special_mark, hit) 
		VALUES(
			desertion_no=#{desertion_no}, 
			filename=#{filename}, 
			happen_dt=#{happen_dt}, 
			happen_place= #{happen_place}, 
			kind_cd=#{kind_cd}, 
			color_cd= #{color_cd}, 
			age=#{age}, 
			weight=#{weight}, 
			notice_no=#{notice_no}, 
			notice_sdt=#{notice_sdt}, 
			notice_edt=#{notice_edt}, 
			popfile=#{popfile}, 
			process_state=#{process_state}, 
			sex_cd=#{sex_cd}, 
			neuter_yn=#{neuter_yn}, 
			special_mark=#{special_mark},
			0)
		ON DUPLICATE KEY UPDATE
			desertion_no=#{desertion_no}, 
			filename=#{filename}, 
			happen_dt=#{happen_dt}, 
			happen_place= #{happen_place}, 
			kind_cd=#{kind_cd}, 
			color_cd= #{color_cd}, 
			age=#{age}, 
			weight=#{weight}, 
			notice_no=#{notice_no}, 
			notice_sdt=#{notice_sdt}, 
			notice_edt=#{notice_edt}, 
			popfile=#{popfile}, 
			process_state=#{process_state}, 
			sex_cd=#{sex_cd}, 
			neuter_yn=#{neuter_yn}, 
			special_mark=#{special_mark}
	</sql>
</mapper>